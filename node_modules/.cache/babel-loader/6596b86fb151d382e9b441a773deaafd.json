{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Documents/\\u0110o\\u0302\\u0300 a\\u0301n to\\u0302\\u0301t nghie\\u0323\\u0302p/DATN/src/component/layout/header/search.jsx\",\n    _s = $RefreshSig$();\n\nimport { faMagnifyingGlass } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { useEffect, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { Link } from 'react-router-dom';\nimport { SearchItem } from './search-item';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Search = () => {\n  _s();\n\n  const [filterData, setFilterData] = useState([]);\n  const [message, setMessage] = useState(undefined);\n  const [filterMessage, setFilterMessage] = useState('');\n  const {\n    register,\n    handleSubmit\n  } = useForm();\n  useEffect(() => {\n    const handleOuterClick = _ref => {\n      let {\n        target\n      } = _ref;\n\n      if (target.className !== 'header-search-data') {\n        setMessage(undefined);\n        setFilterMessage('');\n        setFilterData([]);\n      }\n    };\n\n    if (filterData.length > 0 || message) {\n      window.addEventListener('click', handleOuterClick);\n    }\n\n    return () => {\n      window.removeEventListener('click', handleOuterClick);\n    };\n  }, [filterData, message]);\n\n  const onSearchFormSubmit = async data => {\n    const productQuery = data.search;\n\n    if (!productQuery) {\n      setFilterData([]);\n      setMessage(undefined);\n      return;\n    }\n\n    const {\n      data: filter\n    } = await axios.get('https://thegioitech-be.herokuapp.com/api/product/search/' + productQuery);\n\n    if (filter.length > 0) {\n      setFilterData(filter);\n      setFilterMessage(productQuery);\n      setMessage(undefined);\n    } else {\n      setFilterData([]);\n      setMessage('Not found');\n      setFilterMessage('');\n    }\n  };\n\n  const handleCloseModal = () => {\n    setMessage(undefined);\n    setFilterMessage('');\n    setFilterData([]);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"header-search-wrap\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header-search\",\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        onChange: handleSubmit(onSearchFormSubmit),\n        onSubmit: handleSubmit(onSearchFormSubmit),\n        className: \"header-search-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", { ...register('search'),\n          placeholder: \"H\\xF4m nay b\\u1EA1n c\\u1EA7n t\\xECm g\\xEC?\",\n          className: \"form-input header-search-input\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          title: \"search button\",\n          type: \"submit\",\n          className: \"btn header-search-btn\",\n          children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faMagnifyingGlass\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), (filterData.length > 0 || message) && /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"header-search-data\",\n        children: [filterData.map((item, index) => /*#__PURE__*/_jsxDEV(SearchItem, {\n          data: item,\n          closeModal: handleCloseModal\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 15\n        }, this)), filterData.length > 0 && /*#__PURE__*/_jsxDEV(Link, {\n          to: `/search/${filterMessage}`,\n          className: \"header-search-filter-message\",\n          children: [\"Hi\\u1EC3n th\\u1ECB k\\u1EBFt qu\\u1EA3 cho \", /*#__PURE__*/_jsxDEV(\"span\", {\n            children: filterMessage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 39\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 15\n        }, this), message && /*#__PURE__*/_jsxDEV(\"span\", {\n          children: message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Search, \"6mHmxOH03dC4KawNWdMewl5Xgxc=\", false, function () {\n  return [useForm];\n});\n\n_c = Search;\n\nvar _c;\n\n$RefreshReg$(_c, \"Search\");","map":{"version":3,"sources":["/Users/mac/Documents/Đồ án tốt nghiệp/DATN/src/component/layout/header/search.jsx"],"names":["faMagnifyingGlass","FontAwesomeIcon","useEffect","useState","useForm","Link","SearchItem","axios","Search","filterData","setFilterData","message","setMessage","undefined","filterMessage","setFilterMessage","register","handleSubmit","handleOuterClick","target","className","length","window","addEventListener","removeEventListener","onSearchFormSubmit","data","productQuery","search","filter","get","handleCloseModal","map","item","index"],"mappings":"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","sourcesContent":["import { faMagnifyingGlass } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { useEffect, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { Link } from 'react-router-dom';\nimport { SearchItem } from './search-item';\nimport axios from 'axios';\n\nexport const Search = () => {\n  const [filterData, setFilterData] = useState([]);\n  const [message, setMessage] = useState(undefined);\n  const [filterMessage, setFilterMessage] = useState('');\n  const { register, handleSubmit } = useForm();\n\n  useEffect(() => {\n    const handleOuterClick = ({ target }) => {\n      if (target.className !== 'header-search-data') {\n        setMessage(undefined);\n        setFilterMessage('');\n        setFilterData([]);\n      }\n    };\n    if (filterData.length > 0 || message) {\n      window.addEventListener('click', handleOuterClick);\n    }\n    return () => {\n      window.removeEventListener('click', handleOuterClick);\n    };\n  }, [filterData, message]);\n\n  const onSearchFormSubmit = async (data) => {\n    const productQuery = data.search;\n    if (!productQuery) {\n      setFilterData([]);\n      setMessage(undefined);\n      return;\n    }\n    const { data: filter } = await axios.get(\n      'https://thegioitech-be.herokuapp.com/api/product/search/' + productQuery\n    );\n    if (filter.length > 0) {\n      setFilterData(filter);\n      setFilterMessage(productQuery);\n      setMessage(undefined);\n    } else {\n      setFilterData([]);\n      setMessage('Not found');\n      setFilterMessage('');\n    }\n  };\n\n  const handleCloseModal = () => {\n    setMessage(undefined);\n    setFilterMessage('');\n    setFilterData([]);\n  };\n\n  return (\n    <section className='header-search-wrap'>\n      <div className='header-search'>\n        <form\n          onChange={handleSubmit(onSearchFormSubmit)}\n          onSubmit={handleSubmit(onSearchFormSubmit)}\n          className='header-search-form'\n        >\n          <input\n            {...register('search')}\n            placeholder='Hôm nay bạn cần tìm gì?'\n            className='form-input header-search-input'\n          />\n          <button\n            title='search button'\n            type='submit'\n            className='btn header-search-btn'\n          >\n            <FontAwesomeIcon icon={faMagnifyingGlass} />\n          </button>\n        </form>\n        {(filterData.length > 0 || message) && (\n          <section className='header-search-data'>\n            {filterData.map((item, index) => (\n              <SearchItem\n                key={index}\n                data={item}\n                closeModal={handleCloseModal}\n              />\n            ))}\n            {filterData.length > 0 && (\n              <Link\n                to={`/search/${filterMessage}`}\n                className='header-search-filter-message'\n              >\n                Hiển thị kết quả cho {<span>{filterMessage}</span>}\n              </Link>\n            )}\n            {message && <span>{message}</span>}\n          </section>\n        )}\n      </div>\n    </section>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}